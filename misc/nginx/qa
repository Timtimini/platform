
server {
	listen 80 default_server;
	listen [::]:80 default_server;

	auth_basic				"seo";
	auth_basic_user_file	/etc/apache2/.htpasswd;

	gzip on;

	gzip_types
		text/plain
		text/css
		text/js
		text/xml
		text/javascript
		application/javascript
		application/json
		application/xml
		application/rss+xml
		image/svg+xml;

	index index.html;

	server_name _;

	location ~* /(css|js|images) {
		expires 365d;
		add_header Pragma "public";
		add_header Cache-Control "public";
		root /var/www/otito/wwwroot;
	}

	location / {
		proxy_pass http://localhost:5000;
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection keep-alive;
		proxy_set_header Host $host;
		proxy_cache_bypass $http_upgrade;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto $scheme;
	}
}